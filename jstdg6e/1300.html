<!DOCTYPE html>
<html>
<head>
<title>
pg#314, 13.2.5 JavaScript in URLs
</title>
<style>
#clock {	/* Style apply to element with id="clock" */
    font: bold 24pt sans;	/* Use a big bold font */
    background: #ddf;		/* On a light bluish-gray background */
    padding: 10px;		/* Surround it with some space */
    border: solid black 2px;	/* And a solid black border */
    border-radius: 10px;	/* Round the corners (where supported) */
}

.reveal * { display: none; } /* Children of class="reveal" are not shown */
.reveal *.handle { display: block; } /* Except for class="handle" child */

</style>
<script>
// Define a function to display the current time
function displayTime() {
    var elt = document.getElementById("clock");	// Find element with id="clock"
    var now = new Date();			// Get current time
    elt.innerHTML = now.toLocaleTimeString();	// Make elt display it
    setTimeout(displayTime, 1000);		// Run again in 1 second
}

// Don't do anything until the entire document has loaded
window.onload = function() {
    displayTime();

    // Find all container elements with class "reveal"
    var elements = document.getElementsByClassName("reveal");
    for (var i = 0; i < elements.length; i++ ) { // For each one...
	var elt = elements[i];
	// Find the "handle" element with the container
	var title = elt.getElementsByClassName("handle")[0];
	// When that element is clicked, reveal the reset of the content
	title.onclick = function() {
	    if (elt.className == "reveal") elt.className = "revealed";
	    else if (elt.className == "revealed") elt.className = "reveal";

	    // wkliang:20120901: how to avoid event from bubbling up?
	    return false;
	}
    }
    document.getElementsByTagName("body")[0].onclick = function() {
	this.style.backgroundColor =
		this.style.backgroundColor == "" ? "#00FFFF" : "";
    };
    var myDialog = document.getElementById("myDialog");
    myDialog.onclick = function() {
	// var a = new Object();
	// a["length"]=4; a["0"]="Enter"; a["1"]="x"; a["2"]="y"; a["3"]="z";
	var a = ["Enter coordinates:", "x", "y", "z"];
	var p = window.showModalDialog("1404.html", a, "dialogWidth:640px; dialogHeight:480px; resizable:no");
	var text = "myDialog<br/>\n";
	for (var i = 0; i < p.length; i++) {
	    text += "ret#"+i+"="+p[i]+".<br/>\n";
	}
	myDialog.innerHTML = text;
    };
};

</script>

</head>
<body>	

<h1>Digital Clock</h1>
<span id="clock"></span>

<div class="reveal">
<h1 class="handle">Click Here to Reveal Hidden Text</h1>
<p>This paragraph is hidden. It appears when you click on the title.</p>
</div>

<a href="javascript:new Date().toLocaleTimeString();" target="xMyWin">
What time is it?
</a><br/>

<a href="javascript:alert(new Date().toLocaleTimeString());">
Check the time without overwriting the document
</a><br/>

<a href="javascript:alert(document.getElementById('scriptData').innerHTML);">
show hidden script data
</a><br/>

<a href='javascript:
    var url = "http://";
    while (url) {
	url = prompt("Enter URL: ", url);
	if (url.search(/^http:\/\/.*\.js/i) < 0) {
	    console.log("url: " + url + " mismatched!");
	    continue;
	}
	var head = document.getElementsByTagName("head")[0];
	var script = document.createElement("script");
	script.src = url;
	head.appendChild(script);
	break;
    }
    void 0;
'>JS Loader</a><br/>

<a href='javascript:
  var e = "", r = ""; /* Expression to evaluate and the result */
  do {
    /* Display expression and result and ask for a new expression */
    e = prompt("Expression: " + e + "\n" + r + "\n", e);
    try {
      r = "Result: " + eval(e);	/* Try to evaluate the expression */
    } catch(ex) {		/* Or remember the error instead */
      r = ex;
    }
  } while(e);	/* Continue until no expression entered or Cancel clicked */
  void 0;	/* This prevents the current document from being overwritten */
'>JS Evaluator</a><br/>

<script id="scriptData" type="text/data">
pg#314, 13.2.3 Script Type

When a web browser encounters a script element with a type attribute whose value
it does not recognize, it parses the element but does not attempt to display or execute that content. This means that you can use the script element to embed arbitrary textual data into your document: just use the type attribute to specify a non-executable type for your data. To retrieve the data, you can use the text property of the HTMLElement object that represents the script element (Chapter 15 explains how to obtain these elements). Note, however, that this data embedding technique only works for inline scripts. If you specify a src attribute and an unknown type, the script will be ignored and nothing will be downloaded from the URL you specified.
</script>

<a href="http://www.google.com" target="xMyWin">new google window</a><br/>
<a href='javascript:
	var xDialog = window.open("1404.html","xMyWin");
'>another window</a><br/>

<div id="myDialog">showModalDialog</div>

</body>
</html>
