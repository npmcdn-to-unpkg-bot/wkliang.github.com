<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Web Gallery | Infinite Scroll</title>
<link rel="stylesheet" href="style.css" />

<!--
http://alexandrupitea.ro/nettuts/scroll/#header
http://www.jquery4u.com/tutorials/jquery-infinite-scrolling-demos/
http://www.8comic.com/show/cool-487.html?ch=1-25
-->
</head>

<body onload="setInterval('scroll();', 250);">
<div id="header">Web Gallery | Infinite Scroll</div>
<div id="container">
  <a href="http://www.alexandrupitea.ro/raultamas.html"><img src="http://www.alexandrupitea.ro/thumb/1.jpg" /></a>
    <a href="http://www.alexandrupitea.ro/mascus.html"><img src="http://www.alexandrupitea.ro/thumb/2.jpg" /></a>
    <a href="http://www.alexandrupitea.ro/artsoft.html"><img src="http://www.alexandrupitea.ro/thumb/3.jpg" /></a><br />
    <a href="http://www.alexandrupitea.ro/artificial.html"><img src="http://www.alexandrupitea.ro/thumb/4.jpg" /></a>
    <a href="http://www.alexandrupitea.ro/silvestru.html"><img src="http://www.alexandrupitea.ro/thumb/5.jpg" /></a>
    <a href="http://www.alexandrupitea.ro/moodplay.html"><img src="http://www.alexandrupitea.ro/thumb/6.jpg" /></a><br />
    <a href="http://www.alexandrupitea.ro/mascus.html"><img src="http://www.alexandrupitea.ro/thumb/7.jpg" /></a>
    <a href="http://www.alexandrupitea.ro/raultamas.html"><img src="http://www.alexandrupitea.ro/thumb/8.jpg" /></a>
    <a href="http://www.alexandrupitea.ro/artificial.html"><img src="http://www.alexandrupitea.ro/thumb/9.jpg" /></a>
    <p>9 Images Displayed | <a href="#header">top</a></p>
    <br />
    <hr />
</div>
</body>
</html>
<script>
var contentHeight = 800;
var pageHeight = document.documentElement.clientHeight;
var scrollPosition;
var n = 10;
var xmlhttp;
var links = new Array("raultamas", "mascus", "artsoft", "artificial", "silvestru", "moodplay", "mascus", "raultamas", "artificial", "moodplay", "mascus", "raultamas", "artificial", "moodplay", "mascus", "raultamas", "mascus", "artsoft", "artificial", "silvestru", "moodplay", "mascus", "raultamas", "artificial");

function putImages(){
	
	if (xmlhttp.readyState==4) 
	  {
		  if(xmlhttp.responseText){
			 var resp = xmlhttp.responseText.replace("\r\n", ""); 
			 var files = resp.split(";");
			  var j = 0;
			  for(i=0; i<files.length; i++){
				  if(files[i] != ""){
					 document.getElementById("container").innerHTML += '<a href="http://www.alexandrupitea.ro/'+links[parseInt(files[i])-1]+'.html"><img src="thumb/'+files[i]+'" /></a>';
					 j++;
				  
					 if(j == 3 || j == 6)
						  document.getElementById("container").innerHTML += '<br />';
					  else if(j == 9){
						  document.getElementById("container").innerHTML += '<p>'+(n-1)+" Images Displayed | <a href='#header'>top</a></p><br /><hr />";
						  j = 0;
					  }
				  }
			  }
		  }
	  }
}
		
		
function scroll(){
	
	if(navigator.appName == "Microsoft Internet Explorer")
		scrollPosition = document.documentElement.scrollTop;
	else
		scrollPosition = window.pageYOffset;		
	
	if((contentHeight - pageHeight - scrollPosition) < 500){
				
		if(window.XMLHttpRequest)
			xmlhttp = new XMLHttpRequest();
		else
			if(window.ActiveXObject)
				xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
			else
				alert ("Bummer! Your browser does not support XMLHTTP!");		  
		  
		var url="getImages.php?n="+n;
		
		xmlhttp.open("GET",url,true);
		xmlhttp.send();
		
		n += 9;
		xmlhttp.onreadystatechange=putImages;		
		contentHeight += 800;		
	}
}

</script>
